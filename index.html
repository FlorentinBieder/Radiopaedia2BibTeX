<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function main(){
   
    function translate(input){
        const re = new RegExp("(.+) et al\. (.*\.) Reference article, Radiopaedia\.org \\(Accessed on (.*)\\) (https.*)")
        const matches = input.match(re)
        var authors = matches[1]
        authors = authors.split(', ').map(function(a){
            var names = a.split(' ')
            var out = names[0]+", "+names.slice(1).join(' '); //.join('. ')+"."
            return out;
        }).join(' and ')
        var title = matches[2]
        var date = new Date(Date.parse(matches[3]))
        date.setUTCHours(0, 0, 0, 0);
        var time = date.toISOString().slice(0, 10)
        var url = matches[4].split(' ')[0]
        var output = ("@misc\{radiopaedia"+title.split(' ')[0]+",\n"+
            "  title = \{"+title+" Reference article, Radiopaedia.org\},\n"+
            "  author= \{"+authors+" and others\},\n"+
            "  howpublished = \{\\url\{"+url+"\}\},\n"+
                    "  note = \{Accessed: "+time+"\}\n\}"); //to iso
        return output
    }
    const textareaInput = document.createElement('textarea')
    textareaInput.style.width = '600px'
    textareaInput.style.height = '400px'
    textareaInput.value = ''

    const textareaOutput = document.createElement('textarea')
    textareaOutput.style.width = '600px'
    textareaOutput.style.height = '400px'
    textareaOutput.value = 'asf'

    function eventDisp(event) {
        textareaOutput.value = translate(event.target.value)
    }
    textareaInput.addEventListener('input', eventDisp);
    document.body.appendChild(textareaInput)
    document.body.appendChild(textareaOutput)
    //outElemphoto.onmouseover = x => elem.select()
    var value = 'Gaillard F, Bell D, Hacking C, et al. Glial cells. Reference article, Radiopaedia.org (Accessed on 15 Jul 2024) https://doi.org/10.53347/rID-51711 '
    textareaInput.value = value
    textareaOutput.value = translate(value)
}
window.onload = main
</script>
</head>
<body>
</body>
</html>
